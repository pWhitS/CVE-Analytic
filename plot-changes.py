import sys


def generateJavascriptGraph(graphname, changeList):
	graphTitle = graphname
	graphname += ".html"
	hofl = open(graphname, "w")

	scriptStr = """<script type="text/javascript" src="https://www.google.com/jsapi"></script>
	<script>
google.load('visualization', '1', {packages: ['corechart', 'bar']});
google.setOnLoadCallback(drawBasic);

function drawBasic() {
	  var test = ""
      var data = new google.visualization.DataTable();
      data.addColumn('string', 'Exploit Type');
      data.addColumn('number', 'Number of Increases');
      data.addColumn('number', 'Number of Decreases')

      data.addRows([
         ["xss", %(ga)s, %(gb)s],
         ["privilegeEscalation", %(gc)s, %(gd)s],
         ["dirTraversal", %(ge)s, %(gf)s],
         ["codeExecution", %(gg)s, %(gh)s],
         ["sqlInjection", %(gi)s, %(gj)s],
         ["denialOfService", %(gk)s, %(gl)s],
         ["memCorruption", %(gm)s, %(gn)s],
         ["bufferOverflow", %(go)s, %(gp)s],
         ["heapOverflow", %(gq)s, %(gr)s],
         ["bypassAttacks", %(gs)s, %(gt)s],
         ["csrf", %(gu)s, %(gv)s],
         ["infoExposure", %(gw)s, %(gx)s],
         ["fileInclusion", %(gy)s, %(gz)s],
      ]);

      var options = {
        // width: 100,
        height: 700,
        title: '%(title)s',
        hAxis: {
          title: 'Exploit Type',
          format: '',
          viewWindow: {
            min: [2, 5, 0],
            max: [2, 5, 0]
          }
        },
        vAxis: {
          title: 'Number of Changes'
        }
      };

      var chart = new google.visualization.ColumnChart(document.getElementById('chart_div'));

      chart.draw(data, options);
    }

</script>

<div id="chart_div"></div>""" % {'ga':str(changeList[0]), 'gb':str(changeList[1]),
								 'gc':str(changeList[2]), 'gd':str(changeList[3]),
								 'ge':str(changeList[4]), 'gf':str(changeList[5]),
								 'gg':str(changeList[6]), 'gh':str(changeList[7]),
								 'gi':str(changeList[8]), 'gj':str(changeList[9]),
								 'gk':str(changeList[10]), 'gl':str(changeList[11]),
								 'ga':str(changeList[0]), 'gb':str(changeList[1]),
								 'gc':str(changeList[2]), 'gd':str(changeList[3]),
								 'ge':str(changeList[4]), 'gf':str(changeList[5]),
								 'gg':str(changeList[6]), 'gh':str(changeList[7]),
								 'gi':str(changeList[8]), 'gj':str(changeList[9]),
								 'gk':str(changeList[10]), 'gl':str(changeList[11]),
 								 'gm':str(changeList[12]), 'gn':str(changeList[13]),
 								 'go':str(changeList[14]), 'gp':str(changeList[15]),
 								 'gq':str(changeList[16]), 'gr':str(changeList[17]),
 								 'gs':str(changeList[18]), 'gt':str(changeList[19]),
								 'gu':str(changeList[20]), 'gv':str(changeList[21]),
								 'gw':str(changeList[22]), 'gx':str(changeList[23]),
								 'gy':str(changeList[24]), 'gz':str(changeList[25]),
								 'gu':str(changeList[20]), 'gv':str(changeList[21]),
								 'gw':str(changeList[22]), 'gx':str(changeList[23]),
								 'gy':str(changeList[24]), 'gz':str(changeList[25]),
 								 'title':str(graphTitle)}

	hofl.write(scriptStr)
	hofl.close()


lineList = []
changeList = []
graphname = sys.argv[1]

for line in sys.stdin:
	line = line.strip()
	vuln, inc, dec = line.split(" ")

	changeList.append(inc)
	changeList.append(dec)


generateJavascriptGraph(graphname, changeList)


